webpackJsonp([1],{NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("7+uW"),o={name:"GameHeader",data:()=>({}),computed:{currScore(){return this.$store.state.currScore},bestScore(){return this.$store.state.bestScore}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[e._m(0),e._v(" "),r("div",{staticClass:"row-right"},[r("span",[e._v("当前分数:")]),e._v(" "),r("span",[e._v(e._s(e.currScore))]),e._v(" "),r("span",[e._v("最高分:")]),e._v(" "),r("span",[e._v(e._s(e.bestScore))])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{staticClass:"row-left"},[t("span",[this._v("2048")])])}]};var a={name:"App",components:{GameHeader:r("VU/8")(o,s,!1,function(e){r("eWbY")},"data-v-bd69e1da",null).exports}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("GameHeader"),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var u=r("VU/8")(a,i,!1,function(e){r("RDTc")},null,null).exports,l=r("/ocq"),c={name:"EachNum",data:()=>({bgColorObj:{2:"#eee4da",4:"#F4A460",8:"#FF7F50",16:"#FF6347",32:"#FF4500",64:"#f65e3b",128:"#edcf72",256:"#edcc61",512:"#edc850",1024:"#edc53f",2048:"#edc22e",4096:"#3c3a32",8192:"#3c3a32"}}),props:{num:null},computed:{numStyle(){return{backgroundColor:this.bgColorObj[this.num],color:this.num>4?"f9f6f2":"#333",fontSize:this.num>1e3?"36px":"48px"}}}},m={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{style:this.numStyle},[this._v("\n    "+this._s(this.num?this.num:"")+"\n")])},staticRenderFns:[]};var h={name:"GameContainer",components:{EachNum:r("VU/8")(c,m,!1,function(e){r("rVfg")},"data-v-3e0a2b45",null).exports},data:()=>({numArr:[],isMoved:!1,keyCodeMap:{38:0,39:1,40:2,37:3,87:0,68:1,83:2,65:3}}),created(){this.initNumArr()},mounted(){document.addEventListener("keyup",e=>{var t=this.keyCodeMap[e.which];this.move(t)})},beforeUpdate(){this.generateNewNum(),this.isMoved=!1},methods:{initNumArr(){let e=0,t=0;for(let e=0;e<4;e++){this.numArr[e]=[];for(let t=0;t<4;t++)this.numArr[e][t]=null}for(let r=0;r<4;r++)e=Math.floor(4*Math.random()),t=Math.floor(4*Math.random()),this.numArr[e][t]=2+2*Math.round(Math.random())},move(e){let t=[],r=[];switch(e){case 0:for(let e=0;e<4;e++){let t=[];for(let r=0;r<4;r++)t.push(this.numArr[r][e]);r.push(this.moveAndMerged(t,!1))}for(let e=0;e<4;e++){let n=[];for(let t=0;t<4;t++)n.push(r[t][e]);t.push(n)}break;case 1:for(let e=0;e<4;e++)t.push(this.moveAndMerged(this.numArr[e],!0));break;case 2:for(let e=0;e<4;e++){let t=[];for(let r=0;r<4;r++)t.push(this.numArr[r][e]);r.push(this.moveAndMerged(t,!0))}for(let e=0;e<4;e++){let n=[];for(let t=0;t<4;t++)n.push(r[t][e]);t.push(n)}break;case 3:for(let e=0;e<4;e++)t.push(this.moveAndMerged(this.numArr[e],!1))}for(let e=0;e<4;e++)for(let r=0;r<4;r++)if(t[e][r]!==this.numArr[e][r]){this.isMoved=!0;break}this.isMoved?(this.numArr=t,t=[],this.isMoved=!1):(t=[],this.isGameOver())},moveAndMerged(e,t){let r=t?3:0,n=new Array(4).fill(null),o=!1;if(t)for(let t=3;t>=0;t--)null!==e[t]&&(e[t]!==n[r+1]||o?(n[r]=e[t],r--):(n[r+1]*=2,this.$store.commit("addScore",n[r+1]),o=!0));else for(let t=0;t<4;t++)null!==e[t]&&(e[t]!==n[r-1]||o?(n[r]=e[t],r++):(n[r-1]*=2,this.$store.commit("addScore",n[r-1]),o=!0));return n},generateNewNum(){let e=!1,t=0,r=0;for(let t=0;t<this.numArr.length&&!0!==(e=this.numArr[t].some(e=>null===e));t++);if(!0===e){do{t=Math.floor(4*Math.random()),r=Math.floor(4*Math.random())}while(null!==this.numArr[t][r]);this.numArr[t][r]=2+2*Math.round(Math.random())}else this.isGameOver()},isGameOver(){let e=!0;for(let t=0;t<this.numArr.length;t++)if(!1===(e=!this.numArr[t].some(e=>null===e)))return 0;for(let t=0;t<4;t++)this.numArr[t].some(function(t,r,n){if(t===n[r-1])return e=!1,!0});if(!1===e)return 0;for(let t=0;t<4;t++)for(let r=1;r<4;r++)this.numArr[t][r]===this.numArr[t][r-1]&&(e=!1);e&&(window.alert("游戏结束"),this.initNumArr())}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"square-wrap"},e._l([0,1,2,3],function(t){return r("div",{key:t},e._l([0,1,2,3],function(n){return r("div",{key:n,staticClass:"square"},[r("EachNum",{attrs:{num:e.numArr[n][t]}})],1)}),0)}),0)])},staticRenderFns:[]};var f=r("VU/8")(h,d,!1,function(e){r("koY0")},"data-v-b1001a96",null).exports,p=r("VU/8")(null,null,!1,null,null,null).exports;n.a.use(l.a);var v=new l.a({routes:[{path:"/",name:"GameContainer",component:f},{path:"/montecarlo",name:"MonteCarlo",component:p}]}),A=r("NYxO");n.a.use(A.a);let S={currScore:e=>e.currScore},_={addScore(e,t){e.currScore+=t,e.currScore>e.bestScore&&(e.bestScore=e.currScore)},saveState(e){localStorage.setItem("state",JSON.stringify(e))},initState(e){let t=JSON.parse(localStorage.getItem("state"));if(t){let{bestScore:r}=t;e.bestScore=r}}};var b=new A.a.Store({state:{currScore:0,bestScore:0},getters:S,mutations:_});n.a.config.productionTip=!1;const M=new n.a({el:"#app",router:v,store:b,components:{App:u},template:"<App/>"});window.onload=function(){M.$store.commit("initState")},window.onbeforeunload=function(){M.$store.commit("saveState")}},RDTc:function(e,t){},eWbY:function(e,t){},koY0:function(e,t){},rVfg:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.7170f85175e9296d2b68.js.map